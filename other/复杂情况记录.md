## 按顺序请求三个接口，并且这三个接口需要重复请求两次。
 **第一个接口：传递一个设备id，请求当前设备下的所有（遥测 || 遥信）数据的id。**
 **第二个接口：等（ 遥测 || 遥信）的id拿到之后，去求请求实时数据**
 **第三个接口：用第一个接口的id。去请求数据固定数据，单位或**
 ```javascript
        // 根据设备id查询所有遥测遥信的数据
    async getTelemeteringList(val) {
        let dataArr = [];
        this.telemetryTelecommandlist = {};
        try {
            const processTelemetryType = async (type) => {
                const resModel = await model(this.paramsA(type, val.mrid));
                const mode1 = resModel?.body?.data;

                if (mode1?.length) {
                    // this.telemetryTelecommand.push(...mode1);
                    dataArr = mode1;
                    // 2. 根据遥测id来查询遥测的实时数据
                    const resRealtime = await realtime(this.paramsC(type, mode1));
                    const realtimeData = resRealtime?.body?.values;

                    dataArr = dataArr.map((v) => {
                    const isShowData = realtimeData.find((vv) => vv.key === v.mrid);
                    if (isShowData) {
                        return {
                        ...v,
                        ...isShowData,
                        valueNum: Number(
                            isShowData.value.toString().match(/^\d+(?:\.\d{0,2})?/)
                        ),
                        typeName: type === "discrete" ? "state" : type,
                        };
                    } else {
                        return v;
                    }
                    });

                    if (realtimeData?.length) {
                    // 3. 根据遥测的id来查询遥测的path，用于负荷分类
                    const resGetByMrid = await getByMrid(this.paramsB(type, mode1));
                    const getByMridData = resGetByMrid?.body?.values;
                    dataArr = dataArr.map((v) => {
                        const getByMridItem = getByMridData.find(
                        (vv) => vv.mrid === v.mrid
                        );
                        if (getByMridItem) {
                        return {
                            ...v,
                            unitsymbol: getByMridItem?.unitsymbol,
                            alarm_class: getByMridItem?.alarm_class,
                            path: getByMridItem?.path,
                        };
                        } else {
                        return v;
                        }
                    });
                    //  数据全部取出来，需要分类了
                    return classify(type, dataArr);
                    }
                }
            };
            this.measurePointLoading = true;
            this.telemetryTelecommand = [];

            // 处理遥测analog数据
            const analogData = await processTelemetryType("analog");
            // 处理遥信discrete数据
            const discreteData = await processTelemetryType("discrete");
            this.telemetryTelecommandlist = { ...analogData, ...discreteData };
            // loading
            this.measurePointLoading = false;
            this.currentCdIndex = Object.keys(this.telemetryTelecommandlist)[0];
            this.telemetryList = this.telemetryTelecommandlist[this.currentCdIndex];
        } catch (error) {
            console.log(error, "出错；");
            this.measurePointLoading = false;
        }
    },
    paramsA(type, name) {
      return {
        datatype: type,
        field: "mrid,name",
        condition: `\"astid\" = '${name}'`,
      };
    },
    paramsB(v, response) {
      return {
        mrid: response.map((v) => v.mrid),
        tableName: v,
      };
    },
    // 查询实时数据
    paramsC(v, response) {
      return {
        datatype: v === "discrete" ? "state" : v,
        keys: response.map((v) => v.mrid),
      };
    },
```